{% extends "base.html" %}
{% block title %}Edit Student{% endblock %}
{% block content %}
<h2>Edit Student</h2>
<form action="{{ url_for('edit_student', id=student.id) }}" method="post" class="needs-validation" novalidate>
  <div class="mb-3">
    <label for="name" class="form-label">Name</label>
    <input
      type="text"
      class="form-control"
      id="name"
      name="name"
      value="{{ student.name }}"
      required
      maxlength="100">
    <div class="invalid-feedback">
      Please provide a student name.
    </div>
    <small class="form-text text-muted">Maximum 100 characters.</small>
  </div>
  
  <div class="mb-3">
    <label for="email" class="form-label">Email</label>
    <input
      type="email"
      class="form-control"
      id="email"
      name="email"
      value="{{ student.email }}"
      required
      maxlength="100">
    <div class="invalid-feedback">
      Please provide a valid email address.
    </div>
    <small class="form-text text-muted">Maximum 100 characters.</small>
  </div>
  
  <div class="mb-3">
    <label for="admission_date" class="form-label">Admission Date</label>
    <input
      type="date"
      class="form-control"
      id="admission_date"
      name="admission_date"
      value="{{ student.admission_date }}"
      required>
    <div class="invalid-feedback">
      Please provide a valid admission date.
    </div>
  </div>
  
  <button type="submit" class="btn btn-primary">Save changes</button>
  <a href="{{ url_for('list_students') }}" class="btn btn-secondary">Cancel</a>
</form>

<script>
(function() {
  'use strict'
  const forms = document.querySelectorAll('.needs-validation')
  Array.from(forms).forEach(function(form) {
    form.addEventListener('submit', function(event) {
      if (!form.checkValidity()) {
        event.preventDefault()
        event.stopPropagation()
      }
      form.classList.add('was-validated')
    }, false)
  })
})()
</script>
{% endblock %}