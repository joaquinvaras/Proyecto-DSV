{% extends "base.html" %}
{% block title %}Edit Section{% endblock %}
{% block content %}
<div class="container mt-4">
  <h2>Edit Section for Course: {{ course.name }} - Period: {{ instance.period }}</h2>
  
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="alert alert-{{ category }}">{{ message }}</div>
      {% endfor %}
    {% endif %}
  {% endwith %}
  
  <div class="card">
    <div class="card-header bg-light">
      <strong>Section Information</strong>
    </div>
    <div class="card-body">
      <form method="POST">
        <div class="form-group mb-3">
          <label for="number">Section Number</label>
          <input type="number" name="number" id="number" class="form-control" value="{{ section.number }}" required>
          <small class="form-text text-muted">The section number must be unique for this instance.</small>
        </div>
        
        <div class="form-group mb-3">
          <label for="professor">Professor</label>
          <select name="professor_id" id="professor" class="form-control" required>
            {% for professor in professors %}
            <option value="{{ professor.id }}" {% if professor.id == section.professor_id %}selected{% endif %}>
              {{ professor.name }}
            </option>
            {% endfor %}
          </select>
        </div>
        
        <div class="form-check mt-3 mb-3">
          <input class="form-check-input" type="checkbox" name="weight_or_percentage" id="weight_or_percentage"
                {% if section.weight_or_percentage %}checked{% endif %}>
          <label class="form-check-label" for="weight_or_percentage">
            Use Percentage? (unmark means weights system)
          </label>
        </div>
        
        <div class="mt-4">
          <button type="submit" class="btn btn-primary">Save Changes</button>
          <a href="{{ url_for('list_sections', instance_id=instance.id) }}" class="btn btn-secondary">Back to Sections</a>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}